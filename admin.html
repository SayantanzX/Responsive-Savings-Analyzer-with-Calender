<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Panel - Responsive Savings Analyzer</title>
    <script src="https://kit.fontawesome.com/37df75b44e.js" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="admin.css">
    <style>
        #loading-overlay { position: fixed; inset: 0; background: rgba(255,255,255,0.6); display: none; align-items: center; justify-content: center; z-index: 9999; }
        #loading-overlay.show { display: flex; }
        #loading-overlay .spinner { width: 42px; height: 42px; border: 4px solid #28a745; border-right-color: transparent; border-radius: 50%; animation: spin 0.8s linear infinite; }
        @keyframes spin { to { transform: rotate(360deg); } }
    </style>
    <script>
        document.documentElement.setAttribute('data-page', 'admin');
    </script>
</head>
<body>
    <h1 id="view">Due to large tables this admin panel supports Desktop View only</h1>

    <div id="loading-overlay"><div class="spinner" aria-label="Loading"></div></div>

    <div class="admin-container">
        <div class="admin-header">
            <h2>Admin Panel</h2>
            <div class="admin-actions">
                <button id="back-home" title="Back to Home"><i class="fa-solid fa-house"></i></button>
                <button id="logout-admin" title="Log out"><i class="fa-solid fa-right-from-bracket"></i></button>
            </div>
        </div>

        <div class="admin-nav">
            <button class="nav-btn active" data-target="#users"><i class="fa-solid fa-users"></i> Users</button>
            <button class="nav-btn" data-target="#analytics"><i class="fa-solid fa-chart-line"></i> Analytics</button>
            <button class="nav-btn" data-target="#settings"><i class="fa-solid fa-gear"></i> Settings</button>
            <button class="nav-btn" data-target="#logs"><i class="fa-solid fa-clipboard-list"></i> Logs</button>
        </div>

        <div class="admin-content">
            <!-- Users Section -->
            <section id="users" class="section active">
                <div class="section-header">
                    <h3>Users</h3>
                </div>
                <table id="users-table" class="table">
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>Name</th>
                            <th>Email</th>
                            <th>Role</th>
                            <th>Status</th>
                            <th>Created At</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody>
                        <!-- Rows populated by admin.js loadUsers() -->
                    </tbody>
                </table>
            </section>

            <!-- Analytics Section -->
            <section id="analytics" class="section">
                <div class="section-header">
                    <h3>Platform Analytics</h3>
                </div>
                <div class="analytics-grid">
                    <div class="card" id="metric-users">Total Users: <span>0</span></div>
                    <div class="card" id="metric-savings">Total Savings Entries: <span>0</span></div>
                    <div class="card" id="metric-amount">Total Amount: <span>Rs. 0</span></div>
                    <div class="card" id="metric-avg">Average per Entry: <span>Rs. 0</span></div>
                </div>
            </section>

            <!-- Settings Section -->
            <section id="settings" class="section">
                <div class="section-header">
                    <h3>Application Settings</h3>
                </div>
                <form id="settings-form">
                    <div class="filters" style="display:grid; grid-template-columns: repeat(3, minmax(220px, 1fr)); gap:12px; margin-bottom:12px;">
                        <label>
                            Site Name
                            <input type="text" id="site_name" placeholder="App name">
                        </label>
                        <label>
                            Allow Signups
                            <select id="allow_signups">
                                <option value="true">true</option>
                                <option value="false">false</option>
                            </select>
                        </label>
                        <label>
                            Token Expiry (minutes)
                            <input type="number" id="token_expiry_minutes" min="5" step="5" value="30">
                        </label>
                    </div>
                    <button type="submit" class="btn-primary">Save Settings</button>
                </form>
            </section>

            <!-- Logs Section -->
            <section id="logs" class="section">
                <div class="section-header">
                    <h3>System Logs</h3>
                    <div class="filters">
                        <label>
                            Level
                            <select id="log-level">
                                <option value="">All</option>
                                <option value="info">info</option>
                                <option value="warning">warning</option>
                                <option value="error">error</option>
                            </select>
                        </label>
                    </div>
                </div>
                <table id="logs-table" class="table">
                    <thead>
                        <tr>
                            <th>Time</th>
                            <th>Level</th>
                            <th>Message</th>
                            <th>Meta</th>
                        </tr>
                    </thead>
                    <tbody>
                        <!-- Rows populated by admin.js loadLogs() -->
                    </tbody>
                </table>
            </section>
        </div>
    </div>

    <script src="admin.js"></script>
</body>
</html>


